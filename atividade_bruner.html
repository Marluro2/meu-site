<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Atividade Interativa — Teoria de Aprendizagem de Bruner</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: #111a2b;
      --panel-2: #0e1626;
      --text: #e6edf3;
      --muted: #9fb0c3;
      --accent: #3b82f6; /* azul */
      --accent-2: #facc15; /* amarelo */
      --success: #22c55e;
      --danger: #ef4444;
      --border: #1f2a44;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 80% -10%, #14213d00, #0b1220 60%), var(--bg);
      color: var(--text);
      line-height: 1.35;
    }
    .app {
      display: grid;
      grid-template-columns: 280px 1fr;
      min-height: 100dvh;
    }
    aside {
      background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border-right: 1px solid var(--border);
      padding: 20px 16px;
      position: sticky; top: 0; align-self: start; height: 100dvh;
    }
    .brand {
      display: flex; align-items: center; gap: 12px; margin-bottom: 18px;
    }
    .brand .logo { width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(135deg, var(--accent), #06b6d4); display: grid; place-items: center; font-weight: 800; color: white; }
    .brand h1 { font-size: 16px; margin: 0; font-weight: 700; }

    nav { display: grid; gap: 8px; margin-top: 8px; }
    .step-btn {
      text-align: left;
      width: 100%;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 12px;
      cursor: pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .step-btn:hover { transform: translateX(2px); border-color: #2d3b60; }
    .step-btn[aria-current="step"] {
      background: linear-gradient(180deg, #14213d, #0f1a2e 70%);
      border-color: #2f467a;
      box-shadow: 0 0 0 2px #1a2b4d inset;
    }
    .badge { font-size: 11px; padding: 2px 8px; border-radius: 999px; background: #13203a; color: var(--muted); border: 1px solid var(--border); }

    main { padding: 28px; }
    header { display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content: space-between; margin-bottom: 18px; }
    header h2 { font-size: 22px; font-weight: 800; margin: 0; letter-spacing: .2px; }

    .statusbar { display:flex; align-items:center; gap:12px; flex-wrap: wrap; }
    .progress {
      --w: 200px; width: var(--w); height: 10px; border-radius: 999px; background: #101a2a; border: 1px solid var(--border); overflow: hidden;
    }
    .progress > span { display:block; height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), #06b6d4); }
    .pill { font-size: 13px; border:1px solid var(--border); padding:6px 10px; border-radius: 999px; color: var(--muted); }

    .card { background: linear-gradient(180deg, #111b2d, #0f192a); border:1px solid var(--border); border-radius: 16px; padding: 18px; box-shadow: 0 4px 24px rgba(0,0,0,.25); }
    .card + .card { margin-top: 16px; }
    .card h3 { margin: 0 0 8px; font-size: 18px; }
    .card p { color: var(--muted); margin: 0 0 12px; }

    .actions { display:flex; gap:10px; flex-wrap: wrap; margin-top: 14px; }
    .btn { border:1px solid var(--border); background: #0e1728; color: var(--text); padding: 10px 14px; border-radius: 12px; cursor:pointer; }
    .btn.primary { background: linear-gradient(180deg, #1e3a8a, #1d4ed8); border-color: #1e40af; }
    .btn.ghost { background: transparent; }

    /* ENATIVO: moedas arrastar/soltar para formar R$1,00 */
    .moedas { display:flex; gap:12px; flex-wrap: wrap; }
    .moeda { user-select: none; width: 64px; height: 64px; border-radius: 50%; display:grid; place-items:center; font-weight: 800; border:1px solid var(--border); background: radial-gradient(circle at 30% 30%, #223150, #0e1728); cursor: grab; }
    .alvo {
      min-height: 120px; border:2px dashed #29406e; border-radius: 14px; padding: 10px; display:flex; gap:10px; flex-wrap: wrap; align-items:center; justify-content:flex-start; background: #0b1424;
    }
    .chip { font-size: 13px; border:1px solid var(--border); padding:6px 10px; border-radius: 999px; display:inline-flex; gap:6px; align-items:center; background:#0f1a2c; }

    /* ICÔNICO: escolha de imagem (SVG inline) */
    .grid3 { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px; }
    .thumb { border:1px solid var(--border); border-radius: 12px; padding: 8px; background:#0e1728; cursor:pointer; transition: transform .08s ease, border-color .2s ease; }
    .thumb:hover { transform: translateY(-2px); border-color:#2f467a; }
    .thumb[aria-checked="true"] { outline: 2px solid var(--accent); outline-offset: 2px; }
    svg { width: 100%; height: 120px; display:block; }

    /* SIMBÓLICO: quiz */
    .options { display:grid; gap:10px; }
    label.option { border:1px solid var(--border); border-radius: 12px; padding: 10px 12px; display:flex; gap:10px; align-items:center; background:#0f1a2c; cursor:pointer; }
    label.option input { accent-color: var(--accent); }

    .feedback { margin-top: 10px; font-weight: 600; }
    .ok { color: var(--success); }
    .no { color: var(--danger); }

    details.just {
      margin-top: 16px; border:1px solid var(--border); border-radius: 12px; padding: 10px 12px; background:#0e1728;
    }
    details.just summary { cursor: pointer; font-weight: 700; color: var(--accent-2); }

    footer { margin-top: 24px; display:flex; gap:10px; flex-wrap: wrap; align-items:center; justify-content: space-between; color: var(--muted); }

    @media (max-width: 880px) {
      .app { grid-template-columns: 1fr; }
      aside { position: static; height: auto; }
    }
  </style>
</head>
<body>
  <div class="app" role="application">
    <aside aria-label="Navegação da atividade">
      <div class="brand" aria-hidden="true">
        <div class="logo">B</div>
        <h1>Bruner • Atividade</h1>
      </div>
      <p class="pill">3 modos de representação</p>
      <nav>
        <button class="step-btn" data-step="1" aria-current="step">
          1) Enativo — Mãos na massa
          <div class="badge" aria-hidden="true">arraste & solte</div>
        </button>
        <button class="step-btn" data-step="2">
          2) Icônico — Imagens que representam
          <div class="badge" aria-hidden="true">escolha visual</div>
        </button>
        <button class="step-btn" data-step="3">
          3) Simbólico — Linguagem formal
          <div class="badge" aria-hidden="true">quiz</div>
        </button>
      </nav>
    </aside>

    <main>
      <header>
        <h2>Teoria de Aprendizagem de Bruner — Atividade guiada</h2>
        <div class="statusbar" aria-live="polite">
          <div class="progress" aria-label="Progresso da atividade" role="progressbar" aria-valuemin="0" aria-valuemax="3" aria-valuenow="0"><span></span></div>
          <span id="scoreLabel" class="pill">Pontuação: 0/3</span>
        </div>
      </header>

      <!-- ETAPA 1: ENATIVO -->
      <section class="card" id="step-1" data-step="1">
        <h3>1) Enativo — Construa R$ 1,00 com moedas</h3>
        <p>Arraste moedas para a área de montagem até completar <strong>R$ 1,00</strong>. Este é um modo <em>enativo</em>: você aprende agindo e manipulando objetos.</p>
        <div class="moedas" aria-label="Moedas disponíveis">
          <div class="moeda" draggable="true" data-centavos="50" aria-grabbed="false">50¢</div>
          <div class="moeda" draggable="true" data-centavos="25" aria-grabbed="false">25¢</div>
          <div class="moeda" draggable="true" data-centavos="25" aria-grabbed="false">25¢</div>
          <div class="moeda" draggable="true" data-centavos="10" aria-grabbed="false">10¢</div>
          <div class="moeda" draggable="true" data-centavos="10" aria-grabbed="false">10¢</div>
          <div class="moeda" draggable="true" data-centavos="5" aria-grabbed="false">5¢</div>
        </div>
        <div class="card" style="margin-top:12px;">
          <p style="margin-bottom:8px;">Área de montagem (solte aqui):</p>
          <div class="alvo" id="alvo" aria-dropeffect="move"></div>
          <p style="margin-top:10px;">Total atual: <strong id="total">R$ 0,00</strong></p>
          <div class="actions">
            <button class="btn" id="limpar">Limpar</button>
            <button class="btn primary" id="validar1">Validar</button>
          </div>
          <div id="fb1" class="feedback" aria-live="polite"></div>
        </div>

        <details class="just">
          <summary>Justificativa pedagógica (Enativo)</summary>
          <p>No modo enativo, o estudante compreende o conceito por meio de ações. Ao combinar moedas para atingir R$ 1,00, ele constrói o significado de valor e composição por tentativa e erro com <em>feedback</em> imediato, apoiando descoberta guiada e <em>scaffolding</em>.</p>
        </details>
      </section>

      <!-- ETAPA 2: ICÔNICO -->
      <section class="card" id="step-2" data-step="2" hidden>
        <h3>2) Icônico — Qual imagem representa y = x²?</h3>
        <p>Escolha a imagem que melhor representa uma função quadrática simples. Este é o modo <em>icônico</em>, que utiliza imagens para mediar o significado.</p>
        <div class="grid3" role="listbox" aria-label="Escolha uma representação">
          <div class="thumb" role="option" tabindex="0" data-answer="false" aria-checked="false" aria-label="Reta">
            <!-- Reta -->
            <svg viewBox="0 0 200 120" aria-hidden="true"><rect width="200" height="120" fill="#0b1424"/><line x1="0" y1="110" x2="200" y2="10" stroke="#7aa2f7" stroke-width="4"/></svg>
          </div>
          <div class="thumb" role="option" tabindex="0" data-answer="true" aria-checked="false" aria-label="Parábola">
            <!-- Parábola -->
            <svg viewBox="0 0 200 120" aria-hidden="true"><rect width="200" height="120" fill="#0b1424"/><path d="M20,100 Q100,10 180,100" fill="none" stroke="#7aa2f7" stroke-width="4"/></svg>
          </div>
          <div class="thumb" role="option" tabindex="0" data-answer="false" aria-checked="false" aria-label="Círculo">
            <!-- Circulo -->
            <svg viewBox="0 0 200 120" aria-hidden="true"><rect width="200" height="120" fill="#0b1424"/><circle cx="100" cy="60" r="40" fill="none" stroke="#7aa2f7" stroke-width="4"/></svg>
          </div>
        </div>
        <div class="actions">
          <button class="btn primary" id="validar2">Validar</button>
        </div>
        <div id="fb2" class="feedback" aria-live="polite"></div>

        <details class="just">
          <summary>Justificativa pedagógica (Icônico)</summary>
          <p>No modo icônico, o significado é veiculado por imagens. Ao distinguir a parábola da reta e do círculo, o estudante vincula a aparência visual ao conceito de "crescimento não linear" típico das quadráticas.</p>
        </details>
      </section>

      <!-- ETAPA 3: SIMBÓLICO -->
      <section class="card" id="step-3" data-step="3" hidden>
        <h3>3) Simbólico — Linguagem formal</h3>
        <p>Responda: Qual é a <em>forma canônica</em> de uma função quadrática?</p>
        <div class="options">
          <label class="option"><input type="radio" name="q3" value="a"/> y = ax + b</label>
          <label class="option"><input type="radio" name="q3" value="b"/> y = ax² + bx + c</label>
          <label class="option"><input type="radio" name="q3" value="c"/> y = a(x - h)² + k</label>
        </div>
        <div class="actions">
          <button class="btn primary" id="validar3">Validar</button>
        </div>
        <div id="fb3" class="feedback" aria-live="polite"></div>

        <details class="just">
          <summary>Justificativa pedagógica (Simbólico)</summary>
          <p>No modo simbólico, o estudante opera com linguagem e notação. A forma canônica <code>y = a(x - h)² + k</code> explicita parâmetros e generaliza o conceito, favorecendo transferência para problemas novos.</p>
        </details>
      </section>

      <section class="card">
        <h3>Como esta atividade justifica Bruner no seu site</h3>
        <p>
          A sequência <strong>Enativo → Icônico → Simbólico</strong> materializa a proposta de Bruner de representar um mesmo conteúdo em níveis progressivos e cumulativos, com <em>descoberta guiada</em> e <em>feedback</em> imediato. O estudante manipula (enativo), reconhece padrões (icônico) e formaliza (simbólico), evidenciando o valor pedagógico dessa teoria.
        </p>
      </section>

      <footer>
        <div class="actions">
          <button class="btn ghost" id="prev">◀︎ Anterior</button>
          <button class="btn primary" id="next">Próxima ▶︎</button>
          <button class="btn" id="reiniciar">Reiniciar</button>
        </div>
        <div class="actions">
          <button class="btn" id="salvar">Salvar resultados (.json)</button>
          <span id="finalMsg" aria-live="polite"></span>
        </div>
      </footer>

    </main>
  </div>

  <script>
    // ======= Utilidades básicas =======
    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));

    const state = {
      step: 1,
      score: 0,
      done: { s1:false, s2:false, s3:false },
    };

    function setStep(n){
      state.step = n;
      // alterna visibilidade
      [1,2,3].forEach(i=>{
        const sec = $('#step-'+i);
        if(!sec) return;
        if(i===n){ sec.removeAttribute('hidden'); }
        else { sec.setAttribute('hidden', ''); }
      });
      // aria-current nos botões
      $$('.step-btn').forEach(b=>{
        b.setAttribute('aria-current', b.dataset.step==n ? 'step' : 'false');
      });
      updateNavButtons();
    }

    function updateProgress(){
      const doneCount = Object.values(state.done).filter(Boolean).length;
      state.score = doneCount;
      $('.progress').setAttribute('aria-valuenow', String(doneCount));
      $('.progress > span').style.width = (doneCount/3*100)+'%';
      $('#scoreLabel').textContent = `Pontuação: ${doneCount}/3`;
      if(doneCount===3){
        $('#finalMsg').textContent = 'Excelente! Você concluiu os três modos de representação.';
      }
    }

    function updateNavButtons(){
      $('#prev').disabled = state.step===1;
      $('#next').disabled = state.step===3;
    }

    // ======= Navegação lateral =======
    $$('.step-btn').forEach(btn=>btn.addEventListener('click', ()=>setStep(Number(btn.dataset.step))));

    // ======= Rodapé (prev/next/reiniciar/salvar) =======
    $('#prev').addEventListener('click', ()=> setStep(Math.max(1, state.step-1)) );
    $('#next').addEventListener('click', ()=> setStep(Math.min(3, state.step+1)) );
    $('#reiniciar').addEventListener('click', ()=>{
      // reset moedas
      $('#alvo').innerHTML = '';
      updateTotal(0);
      $('#fb1').textContent='';
      $('#fb2').textContent='';
      $('#fb3').textContent='';
      $$('label.option input').forEach(i=> i.checked=false);
      $$('.thumb').forEach(t=> t.setAttribute('aria-checked','false'));
      state.done = {s1:false,s2:false,s3:false};
      updateProgress();
      setStep(1);
      $('#finalMsg').textContent='';
    });

    $('#salvar').addEventListener('click', ()=>{
      const data = {
        concluido: state.score,
        etapas: state.done,
        timestamp: new Date().toISOString()
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'resultado_atividade_bruner.json';
      a.click();
      URL.revokeObjectURL(a.href);
    });

    // ======= ETAPA 1 — ENATIVO (drag & drop de moedas) =======
    let totalCentavos = 0;
    function formatBRLcentavos(c){
      return c.toLocaleString('pt-BR', { style:'currency', currency:'BRL' }).replace(',00','');
    }
    function updateTotal(v){
      totalCentavos = v;
      $('#total').textContent = formatBRLcentavos(v/100);
    }

    $$('.moeda').forEach(m => {
      m.addEventListener('dragstart', ev=>{
        ev.dataTransfer.setData('text/plain', m.dataset.centavos);
        m.setAttribute('aria-grabbed','true');
      });
      m.addEventListener('dragend', ()=> m.setAttribute('aria-grabbed','false'));
    });

    const alvo = $('#alvo');
    alvo.addEventListener('dragover', ev=> ev.preventDefault());
    alvo.addEventListener('drop', ev=>{
      ev.preventDefault();
      const c = Number(ev.dataTransfer.getData('text/plain')) || 0;
      // cria um chip representando a moeda solta
      const chip = document.createElement('span');
      chip.className = 'chip';
      chip.dataset.centavos = String(c);
      chip.innerHTML = `${c}¢ <button title="Remover" aria-label="Remover moeda" style="background:transparent;border:0;color:#93a6c4;cursor:pointer">×</button>`;
      chip.querySelector('button').addEventListener('click', ()=>{
        chip.remove();
        updateTotal(sumAlvo());
      });
      alvo.appendChild(chip);
      updateTotal(sumAlvo());
    });

    function sumAlvo(){
      return $$('#alvo .chip').reduce((acc, el)=> acc + Number(el.dataset.centavos||0), 0);
    }

    $('#limpar').addEventListener('click', ()=>{ $('#alvo').innerHTML=''; updateTotal(0); });

    $('#validar1').addEventListener('click', ()=>{
      const ok = sumAlvo() === 100;
      $('#fb1').textContent = ok ? '✔️ Perfeito! Você montou R$ 1,00.' : '❌ Ainda não deu R$ 1,00. Tente outras combinações.';
      $('#fb1').className = 'feedback ' + (ok? 'ok' : 'no');
      if(ok){ state.done.s1 = true; updateProgress(); }
    });

    // ======= ETAPA 2 — ICÔNICO =======
    $$('.thumb').forEach(t=>{
      t.addEventListener('click', ()=>{
        $$('.thumb').forEach(x=> x.setAttribute('aria-checked','false'));
        t.setAttribute('aria-checked','true');
      });
      t.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){ e.preventDefault(); t.click(); }
      });
    });

    $('#validar2').addEventListener('click', ()=>{
      const sel = $('.thumb[aria-checked="true"]');
      if(!sel){ $('#fb2').textContent='Selecione uma opção.'; $('#fb2').className='feedback'; return; }
      const ok = sel?.dataset.answer === 'true';
      $('#fb2').textContent = ok ? '✔️ Correto! A parábola representa y = x².' : '❌ Observe a curvatura: a quadrática forma uma parábola, não uma reta nem um círculo.';
      $('#fb2').className = 'feedback ' + (ok? 'ok' : 'no');
      if(ok){ state.done.s2 = true; updateProgress(); }
    });

    // ======= ETAPA 3 — SIMBÓLICO =======
    $('#validar3').addEventListener('click', ()=>{
      const sel = $('input[name="q3"]:checked');
      if(!sel){ $('#fb3').textContent='Escolha uma alternativa.'; $('#fb3').className='feedback'; return; }
      const ok = sel.value === 'c';
      $('#fb3').textContent = ok ? '✔️ Correto! y = a(x - h)² + k é a forma canônica.' : '❌ Quase lá. A forma canônica é y = a(x - h)² + k.';
      $('#fb3').className = 'feedback ' + (ok? 'ok' : 'no');
      if(ok){ state.done.s3 = true; updateProgress(); }
    });

    // Inicialização
    setStep(1);
    updateProgress();
  </script>
</body>
</html>
